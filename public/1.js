webpackJsonp([1],{314:function(t,e,a){var r=a(1)(a(364),a(380),!1,function(t){a(362)},null,null);t.exports=r.exports},328:function(t,e,a){var r=a(1)(a(331),a(332),!1,function(t){a(329)},null,null);t.exports=r.exports},329:function(t,e,a){var r=a(330);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(5)("6bfd71ba",r,!0,{})},330:function(t,e,a){(t.exports=a(2)(!1)).push([t.i,"",""])},331:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{keyword:{required:!0,type:String}},methods:{handleSearch:function(){this.$emit("on-submit",this.keyword)}}}},332:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"form-inline",on:{submit:function(e){return e.preventDefault(),t.handleSearch(e)}}},[a("div",{staticClass:"form-group"},[a("input",{staticClass:"form-control form-control-sm mr-sm-2",attrs:{type:"text",name:"keyword",id:"inlineFormInputName2",placeholder:"Search item"},domProps:{value:t.keyword},on:{input:function(e){return t.$emit("on-change",e)}}})]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"submit"}},[e("i",{staticClass:"fa fa-search"}),this._v("SEARCH\n    ")])}]}},362:function(t,e,a){var r=a(363);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(5)("616067c5",r,!0,{})},363:function(t,e,a){(t.exports=a(2)(!1)).push([t.i,"",""])},364:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},o=u(a(365)),s=u(a(328)),n=u(a(370)),i=u(a(153)),l=u(a(154)),c=u(a(375)),d=a(8);function u(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Card:function(){return new Promise(function(t){t()}).then(a.bind(null,152))},SalesTable:o.default,SearchForm:s.default,DateFilter:n.default,Pagination:i.default,ReportForm:c.default,Modal:l.default},computed:r({},(0,d.mapGetters)({sales:"SALES/GET_SALES",is_loading:"SALES/GET_LOADING_STATE",keyword:"FILTER_MODULE/GET_KEYWORD"}),{date_from:{get:function(){return this.$store.getters["FILTER_MODULE/GET_DATE_FROM"]},set:function(t){this.$store.commit("FILTER_MODULE/SET_DATE_FROM",t)}},date_to:{get:function(){return this.$store.getters["FILTER_MODULE/GET_DATE_TO"]},set:function(t){this.$store.commit("FILTER_MODULE/SET_DATE_TO",t)}},page_size:{get:function(){return this.$store.getters["FILTER_MODULE/GET_PAGE_SIZE"]},set:function(t){this.$store.commit("FILTER_MODULE/SET_PAGE_SIZE",t)}},current_page:{get:function(){return this.$store.getters["FILTER_MODULE/GET_CURRENT_PAGE"]},set:function(t){this.$store.commit("FILTER_MODULE/SET_PAGE_SIZE",t)}},order_by:{get:function(){return this.$store.getters["FILTER_MODULE/GET_ORDER_BY"]},set:function(t){this.$store.commit("FILTER_MODULE/SET_ORDER_BY",t)}},sort_by:{get:function(){return this.$store.getters["FILTER_MODULE/GET_SORT_BY"]},set:function(t){this.$store.commit("FILTER_MODULE/SET_SORT_BY",t)}}}),data:function(){return{data:[],is_submitting:!1}},methods:r({},(0,d.mapActions)("SALES",{fetchSales:"FETCH_SALES",find:"FIND"}),(0,d.mapMutations)({setKeyword:"FILTER_MODULE/SET_KEYWORD",setDateFrom:"FILTER_MODULE/SET_DATE_FROM",setDateTo:"FILTER_MODULE/SET_DATE_TO"}),{handleEdit:function(t){t&&this.$router.push({name:"edit-sales",params:{receipt:t.receipt_no}})},onChange:function(t){var e=t.target.name,a=t.target.value;switch(e){case"keyword":this.setKeyword(a);break;case"date_from":this.setDateFrom(a);break;case"date_to":this.setDateTo(a)}},handleSearch:function(t){var e="/api/sales?q="+t+"&page="+this.current_page+"&per_page="+this.page_size+"&order_by="+this.order_by+"&sort_by="+this.sort_by+"&date_from="+this.date_from+"&date_to="+this.date_to;this.fetchSales(e)},handleFilter:function(t){var e=t.date_from,a=t.date_to,r="/api/sales?q="+this.keyword+"&page="+this.current_page+"&per_page="+this.page_size+"&order_by="+this.order_by+"&sort_by="+this.sort_by+"&date_from="+e+"&date_to="+a;this.fetchSales(r)},onReportSubmit:function(t){var e=this,a=Cookies.get("_a.token"),r=t.type,o=(window.location.protocol,window.location.host,document.createElement("a"));switch(o.style="display:none",r){case"daily":var s=t.date_from,n=t.date_to;this.is_submitting=!0,axios.get("/api/sales/report/daily?date_from="+s+"&date_to="+n,{headers:{Accept:"application/json",Authorization:"Bearer "+a}}).then(function(t){var a=t.data;e.is_submitting=!1,o.href=a.file,o.target="_blank",o.download=a.filename,o.click()}).catch(function(t){var a=t.response;e.is_submitting=!1,toastr.error("Server Response Error","Oops something went wrong"),console.log(a)});break;case"monthly":var i=t.month,l=t.year;this.is_submitting=!0,axios.get("/api/sales/report/monthly?month="+i+"&year="+l,{headers:{Accept:"application/json",Authorization:"Bearer "+a}}).then(function(t){var a=t.data;e.is_submitting=!1,o.href=a.file,o.target="_blank",o.download=a.filename,o.click()}).catch(function(t){var a=t.response;e.is_submitting=!1,toastr.error("Server Response Error","Oops something went wrong"),console.log(a)})}},toPage:function(t){var e="/api/sales?q="+this.keyword+"&page="+t+"&per_page="+this.page_size+"&order_by="+this.order_by+"&sort_by="+this.sort_by+"&date_from="+this.date_from+"&date_to="+this.date_to;this.fetchSales(e)},firstPage:function(t){var e=t+"&q="+this.keyword+"&per_page="+this.page_size+"&order_by="+this.order_by+"&sort_by="+this.sort_by+"&date_from="+this.date_from+"&date_to="+this.date_to;this.fetchSales(e)},prevPage:function(t){var e=t+"&q="+this.keyword+"&per_page="+this.page_size+"&order_by="+this.order_by+"&sort_by="+this.sort_by+"&date_from="+this.date_from+"&date_to="+this.date_to;this.fetchSales(e)},nextPage:function(t){var e=t+"&q="+this.keyword+"&per_page="+this.page_size+"&order_by="+this.order_by+"&sort_by="+this.sort_by+"&date_from="+this.date_from+"&date_to="+this.date_to;this.fetchSales(e)},lastPage:function(t){var e=t+"&q="+this.keyword+"&per_page="+this.page_size+"&order_by="+this.order_by+"&sort_by="+this.sort_by+"&date_from="+this.date_from+"&date_to="+this.date_to;this.fetchSales(e)},handleModal:function(){$("#generic-modal").modal("show")},setBreadcrumbs:function(){this.$store.commit("setBreadcrumbs",[{text:"Administrator",link:"/administrator"},{text:"Sales",link:"/administrator/sales"}])}}),mounted:function(){this.setBreadcrumbs()},created:function(){this.fetchSales("/api/sales?q="+this.keyword+"&page="+this.current_page+"&per_page="+this.page_size+"&order_by="+this.order_by+"&sort_by="+this.sort_by+"&date_from="+this.date_from+"&date_to="+this.date_to)}}},365:function(t,e,a){var r=a(1)(a(368),a(369),!1,function(t){a(366)},null,null);t.exports=r.exports},366:function(t,e,a){var r=a(367);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(5)("f9749472",r,!0,{})},367:function(t,e,a){(t.exports=a(2)(!1)).push([t.i,".table td{cursor:pointer}",""])},368:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{items:{required:!0},isLoading:{type:Boolean,default:!1}}}},369:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table table-bordered",attrs:{id:"example"}},[t._m(0),t._v(" "),a("tbody",[t.isLoading?a("tr",[t._m(1)]):t._e(),t._v(" "),!t.isLoading&&t.items.data&&0==t.items.data.length?a("tr",[t._m(2)]):t._e(),t._v(" "),!t.isLoading&&t.items.data&&0!=t.items.data.length?t._l(t.items.data,function(e,r){return a("tr",{key:r,on:{click:function(a){return t.$emit("on-edit",e)}}},[a("td",[t._v(t._s(t._f("humanReadable")(e.checkout_date)))]),t._v(" "),a("td",[t._v(t._s(e.receipt_no))]),t._v(" "),a("td",[t._v(t._s(e.payment_mode))]),t._v(" "),a("td",[null===e.payment_terms?a("span",[t._v("N/A")]):a("span",[t._v(t._s(e.payment_terms)+" months")])]),t._v(" "),a("td",[t._v(t._s(e.total_item_cost.formatted))]),t._v(" "),a("td",[t._v(t._s(e.total_freebies_cost.formatted))]),t._v(" "),a("td",[t._v(t._s(e.revenue.formatted))]),t._v(" "),a("th",[t._v(t._s(e.net_income.formatted))]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-sm waves-effect waves-light m-1",attrs:{type:"button","data-toggle":"modal","data-target":"#addmodal"},on:{click:function(a){return a.preventDefault(),t.$emit("on-edit",e)}}},[a("i",{staticClass:"fa fa-edit fa-lg"})])])])}):t._e()],2)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-primary"},[a("tr",[a("th",[t._v("DATE")]),t._v(" "),a("th",[t._v("RECEIPT")]),t._v(" "),a("th",[t._v("PAYMENT MODE")]),t._v(" "),a("th",[t._v("PAYMENT TERM")]),t._v(" "),a("th",[t._v("TOTAL ITEM COST")]),t._v(" "),a("th",[t._v("TOTAL FREEBIES COST")]),t._v(" "),a("th",[t._v("GROSS INCOME")]),t._v(" "),a("th",[t._v("NET INCOME")]),t._v(" "),a("th",[t._v("OPTION")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-center",attrs:{colspan:"8"}},[this._v("\n        Loading\n        "),e("img",{attrs:{src:"/images/ajax-loader.gif",alt:"Loading...."}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{attrs:{colspan:"9"}},[e("p",{staticClass:"text-center"},[e("em",[this._v("No data to show...")])])])}]}},370:function(t,e,a){var r=a(1)(a(373),a(374),!1,function(t){a(371)},null,null);t.exports=r.exports},371:function(t,e,a){var r=a(372);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(5)("487e954c",r,!0,{})},372:function(t,e,a){(t.exports=a(2)(!1)).push([t.i,"",""])},373:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{dateFrom:{required:!0},dateTo:{required:!0}},methods:{handleFilter:function(){var t={date_from:this.dateFrom,date_to:this.dateTo};this.$emit("on-submit",t)}}}},374:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-inline"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"mr-1",attrs:{for:"exampleDropdownFormEmail1"}},[t._v("Date From")]),t._v(" "),a("input",{staticClass:"form-control form-control-sm mr-sm-2",attrs:{name:"date_from",type:"date",id:"exampleDropdownFormEmail1"},domProps:{value:t.dateFrom},on:{input:function(e){return t.$emit("on-change",e)}}}),t._v(" "),a("label",{staticClass:"mr-1",attrs:{for:"exampleDropdownFormPassword1"}},[t._v("To")]),t._v(" "),a("input",{staticClass:"form-control form-control-sm mr-sm-2",attrs:{name:"date_to",type:"date",id:"exampleDropdownFormPassword1"},domProps:{value:t.dateTo},on:{input:function(e){return t.$emit("on-change",e)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-sm btn-success",on:{click:t.handleFilter}},[t._v("\n            Submit\n        ")])])])},staticRenderFns:[]}},375:function(t,e,a){var r=a(1)(a(378),a(379),!1,function(t){a(376)},null,null);t.exports=r.exports},376:function(t,e,a){var r=a(377);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(5)("05b5e194",r,!0,{})},377:function(t,e,a){(t.exports=a(2)(!1)).push([t.i,"",""])},378:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t};e.default={props:{isLoading:{type:Boolean,default:!1}},data:function(){return{type:"monthly",year:moment().format("YYYY"),month:moment().format("MM"),date_from:moment().format("YYYY-MM-DD"),date_to:moment().format("YYYY-MM-DD"),months:[{name:"January",value:"01"},{name:"February",value:"02"},{name:"March",value:"03"},{name:"April",value:"04"},{name:"May",value:"05"},{name:"June",value:"06"},{name:"July",value:"07"},{name:"August",value:"08"},{name:"September",value:"09"},{name:"October",value:10},{name:"November",value:11},{name:"December",value:12}]}},computed:{years:function(){for(var t=[],e=moment().format("YYYY");e>=2e3;e--)t.push(e);return t}},methods:{handleSubmit:function(){var t={type:this.type};t="daily"===this.type?r({},t,{date_from:this.date_from,date_to:this.date_to}):r({},t,{month:this.month,year:this.year}),this.$emit("on-submit",t)}}}},379:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Report Type")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"form-control",attrs:{name:"report_type",id:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.type=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"daily"}},[t._v("Daily")]),t._v(" "),a("option",{attrs:{value:"monthly"}},[t._v("Monthly")])])]),t._v(" "),"daily"===t.type?[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("From Day")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.date_from,expression:"date_from"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"date",name:"date_from",id:""},domProps:{value:t.date_from},on:{input:function(e){e.target.composing||(t.date_from=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("To Day")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.date_to,expression:"date_to"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"date",name:"date_to",id:""},domProps:{value:t.date_to},on:{input:function(e){e.target.composing||(t.date_to=e.target.value)}}})])]:[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Month")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.month,expression:"month"}],staticClass:"form-control ",attrs:{name:"month",id:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.month=e.target.multiple?a:a[0]}}},t._l(t.months,function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.name))])}),0)]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Year")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],staticClass:"form-control ",attrs:{name:"year",id:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.year=e.target.multiple?a:a[0]}}},t._l(t.years,function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}),0)])],t._v(" "),a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-success btn-block",attrs:{disabled:t.isLoading,type:"submit"}},[t.isLoading?a("span",[t._v("Generating Report...")]):a("span",[t._v("\n                Generate "),a("i",{staticClass:"fa fa-print"})])])])],2)},staticRenderFns:[]}},380:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("card",{scopedSlots:t._u([{key:"card-header",fn:function(){return[a("h3",{staticClass:"card-title mb-0"},[t._v("Sales")])]},proxy:!0},{key:"card-body",fn:function(){return[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"float-lg-left py-2"},[a("date-filter",{attrs:{"date-from":t.date_from,"date-to":t.date_to},on:{"on-change":t.onChange,"on-submit":t.handleFilter}})],1),t._v(" "),a("div",{staticClass:"float-lg-right d-lg-flex py-2"},[a("button",{staticClass:"btn btn-sm btn-success mr-2",on:{click:t.handleModal}},[t._v("\n                  Generate Sales Report\n                ")]),t._v(" "),a("search-form",{attrs:{keyword:t.keyword},on:{"on-change":t.onChange,"on-submit":t.handleSearch}})],1)])]),t._v(" "),a("div",{staticClass:"col-lg-12 mb-3 table-responsive"},[a("sales-table",{attrs:{items:t.sales,"is-loading":t.is_loading},on:{"on-edit":t.handleEdit}})],1),t._v(" "),a("div",{staticClass:"col-lg-12"},[a("Pagination",{attrs:{data:t.sales},on:{"to-page":t.toPage,"first-page":t.firstPage,"prev-page":t.prevPage,"next-page":t.nextPage,"last-page":t.lastPage}})],1)])]},proxy:!0}])}),t._v(" "),a("modal",{scopedSlots:t._u([{key:"modal-title",fn:function(){return[a("h5",{staticClass:"modal-title text-white"},[t._v("\n          Generate Report\n        ")])]},proxy:!0},{key:"modal-body",fn:function(){return[a("report-form",{attrs:{"is-loading":t.is_submitting},on:{"on-submit":t.onReportSubmit}})]},proxy:!0}])})],1)])},staticRenderFns:[]}}});