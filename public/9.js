webpackJsonp([9],{324:function(t,e,r){var s=r(1)(r(447),r(458),!1,function(t){r(445)},null,null);t.exports=s.exports},328:function(t,e,r){var s=r(1)(r(331),r(332),!1,function(t){r(329)},null,null);t.exports=s.exports},329:function(t,e,r){var s=r(330);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);r(5)("6bfd71ba",s,!0,{})},330:function(t,e,r){(t.exports=r(2)(!1)).push([t.i,"",""])},331:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{keyword:{required:!0,type:String}},methods:{handleSearch:function(){this.$emit("on-submit",this.keyword)}}}},332:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"form-inline",on:{submit:function(e){return e.preventDefault(),t.handleSearch(e)}}},[r("div",{staticClass:"form-group"},[r("input",{staticClass:"form-control form-control-sm mr-sm-2",attrs:{type:"text",name:"keyword",id:"inlineFormInputName2",placeholder:"Search item"},domProps:{value:t.keyword},on:{input:function(e){return t.$emit("on-change",e)}}})]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"submit"}},[e("i",{staticClass:"fa fa-search"}),this._v("SEARCH\n    ")])}]}},445:function(t,e,r){var s=r(446);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);r(5)("ea22b8da",s,!0,{})},446:function(t,e,r){(t.exports=r(2)(!1)).push([t.i,"",""])},447:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=m(r(9)),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},n=m(r(152)),a=m(r(448)),o=m(r(153)),c=m(r(328)),l=m(r(154)),u=m(r(453)),d=m(r(155)),f=r(8);function m(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Card:n.default,FreebiesTable:a.default,Pagination:o.default,SearchForm:c.default,Modal:l.default,Form:u.default,ValidationErrorComponent:d.default},data:function(){return{form_type:"",submitting:!1,response_errors:null,columns:[{name:"name",required:!0,label:"NAME",align:"left",field:function(t){return t.name},sortable:!0},{name:"price",required:!0,label:"PRICE",align:"left",field:function(t){return t.price},sortable:!0},{name:"options",label:"Options",sortable:!1}]}},computed:i({},(0,f.mapGetters)({freebies:"FREEBIES/GET_FREEBIES",is_loading:"FILTER_MODULE/GET_LOADING",keyword:"FILTER_MODULE/GET_KEYWORD"}),{freebie:function(){var t=this.$store.getters["FREEBIES/GET_FREEBIE"];return{id:t.id,name:t.name,price:t.price}},page_size:{get:function(){return this.$store.getters["FILTER_MODULE/GET_PAGE_SIZE"]},set:function(t){this.$store.commit("FILTER_MODULE/SET_PAGE_SIZE",t)}},current_page:{get:function(){return this.$store.getters["FILTER_MODULE/GET_CURRENT_PAGE"]},set:function(t){this.$store.commit("FILTER_MODULE/SET_PAGE_SIZE",t)}},order_by:{get:function(){return this.$store.getters["FILTER_MODULE/GET_ORDER_BY"]},set:function(t){this.$store.commit("FILTER_MODULE/SET_ORDER_BY",t)}},sort_by:{get:function(){return this.$store.getters["FILTER_MODULE/GET_SORT_BY"]},set:function(t){this.$store.commit("FILTER_MODULE/SET_SORT_BY",t)}}}),methods:i({},(0,f.mapActions)({fetchItems:"FREEBIES/fetchFreebies",store:"FREEBIES/store",update:"FREEBIES/update",delete:"FREEBIES/delete"}),(0,f.mapMutations)({setKeyword:"FILTER_MODULE/SET_KEYWORD",clearItem:"FREEBIES/CLEAR_FREEBIE",setItem:"FREEBIES/SET_FREEBIE"}),{onChange:function(t){this.setKeyword(t.target.value)},handleSearch:function(t){var e="/api/freebies?q="+t+"&page="+this.current_page+"&per_page="+this.page_size+"&order_by="+this.order_by+"&sort_by="+this.sort_by;this.fetchItems(e)},toPage:function(t){var e="/api/freebies?q="+this.keyword+"&page="+t+"&per_page="+this.page_size+"&order_by="+this.order_by+"&sort_by="+this.sort_by;this.fetchItems(e)},firstPage:function(t){var e=t+"?q="+this.keyword+"&per_page="+this.page_size+"&order_by="+this.order_by+"&sort_by="+this.sort_by;this.fetchItems(e)},prevPage:function(t){var e=t+"?q="+this.keyword+"&per_page="+this.page_size+"&order_by="+this.order_by+"&sort_by="+this.sort_by;this.fetchItems(e)},nextPage:function(t){var e=t+"?q="+this.keyword+"&per_page="+this.page_size+"&order_by="+this.order_by+"&sort_by="+this.sort_by;this.fetchItems(e)},lastPage:function(t){var e=t+"?q="+this.keyword+"&per_page="+this.page_size+"&order_by="+this.order_by+"&sort_by="+this.sort_by;this.fetchItems(e)},setBreadcrumbs:function(){this.$store.commit("setBreadcrumbs",[{text:"Administrator",link:"/administrator"},{text:"Freebies",link:"/administrator/freebies"}])},onCreate:function(){this.form_type="CREATE",this.response_errors=null,this.clearItem(),setTimeout(function(){$("#generic-modal").modal("show")},300)},onEdit:function(t){this.form_type="EDIT",this.response_errors=null,this.setItem(t),setTimeout(function(){$("#generic-modal").modal("show")},300)},onDelete:function(t){var e=this;this.$dialog.confirm("<h5>Delete "+t.name+" ?</h5>",{html:!0,loader:!0}).then(function(r){e.delete(t.id).then(function(){r.close(),e.fetchItems("/api/freebies?q="+e.keyword+"&page="+e.current_page+"&per_page="+e.page_size+"&order_by="+e.order_by+"&sort_by="+e.sort_by)})}).catch(function(){})},onSubmit:function(t){var e=this,r={id:t.id,name:t.name,price:t.price};switch(this.submitting=!0,this.form_type){case"CREATE":this.store(r).then(function(t){e.submitting=!1,e.response_errors=null,toastr.success("Saved"),setTimeout(function(){$("#generic-modal").modal("hide")},300),e.fetchItems("/api/freebies?q="+e.keyword+"&page="+e.current_page+"&per_page="+e.page_size+"&order_by="+e.order_by+"&sort_by="+e.sort_by)}).catch(function(t){var r=t.response;e.submitting=!1,422===r.status&&(e.response_errors=r.data.errors)});break;case"EDIT":this.update(r).then(function(t){e.submitting=!1,e.response_errors=null,toastr.success("Changes saved."),e.fetchItems("/api/freebies?q="+e.keyword+"&page="+e.current_page+"&per_page="+e.page_size+"&order_by="+e.order_by+"&sort_by="+e.sort_by),setTimeout(function(){$("#generic-modal").modal("hide")},300)}).catch(function(t){var r=t.response;e.submitting=!1,422===r.status&&(e.response_errors=r.data.errors)})}},resetForm:function(t,e){t.reset(),e.clear()}}),mounted:function(){var t,e=(t=s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.setBreadcrumbs(),this.setKeyword(""),t.next=4,this.fetchItems("/api/freebies?q="+this.keyword+"&page="+this.current_page+"&per_page="+this.page_size+"&order_by="+this.order_by+"&sort_by="+this.sort_by);case 4:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function s(i,n){try{var a=e[i](n),o=a.value}catch(t){return void r(t)}if(!a.done)return Promise.resolve(o).then(function(t){s("next",t)},function(t){s("throw",t)});t(o)}("next")})});return function(){return e.apply(this,arguments)}}()}},448:function(t,e,r){var s=r(1)(r(451),r(452),!1,function(t){r(449)},null,null);t.exports=s.exports},449:function(t,e,r){var s=r(450);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);r(5)("7664cc7f",s,!0,{})},450:function(t,e,r){(t.exports=r(2)(!1)).push([t.i,"",""])},451:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{items:{required:!0},loading:{type:Boolean,default:!1}}}},452:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",{staticClass:"table table-bordered",attrs:{id:"example"}},[t._m(0),t._v(" "),r("tbody",[t.loading?r("tr",[t._m(1)]):t._e(),t._v(" "),!t.loading&&t.items.data&&0==t.items.data.length?r("tr",[t._m(2)]):t._e(),t._v(" "),!t.loading&&t.items.data&&0!=t.items.data.length?t._l(t.items.data,function(e,s){return r("tr",{key:s},[r("td",{staticStyle:{"vertical-align":"middle"}},[t._v(t._s(e.id))]),t._v(" "),r("td",{staticStyle:{"vertical-align":"middle"}},[t._v(t._s(e.name))]),t._v(" "),r("td",{staticStyle:{"vertical-align":"middle"}},[t._v(t._s(e.formatted_price))]),t._v(" "),r("td",[r("button",{staticClass:"btn btn-secondary btn-sm waves-effect waves-light m-1",attrs:{type:"button","data-toggle":"modal","data-target":"#addmodal"},on:{click:function(r){return r.preventDefault(),t.$emit("on-edit",e)}}},[r("i",{staticClass:"fa fa-edit fa-lg"}),t._v(" EDIT\n          ")]),t._v(" "),r("button",{staticClass:"btn btn-danger btn-sm waves-effect waves-light",attrs:{type:"button",id:"confirm-btn-alert4"},on:{click:function(r){return r.preventDefault(),t.$emit("on-delete",e)}}},[r("i",{staticClass:"fa fa-trash fa-lg"}),t._v(" DELETE\n          ")])])])}):t._e()],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticClass:"thead-primary"},[e("tr",[e("th",{attrs:{width:"10%"}},[this._v("#")]),this._v(" "),e("th",{attrs:{width:"60%"}},[this._v("NAME")]),this._v(" "),e("th",{attrs:{width:"10%"}},[this._v("PRICE")]),this._v(" "),e("th",{staticStyle:{witdh:"10%"},attrs:{width:"20%"}},[this._v("OPTIONS")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-center",attrs:{colspan:"8"}},[this._v("\n        Loading\n        "),e("img",{attrs:{src:"/images/ajax-loader.gif",alt:"Loading...."}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{attrs:{colspan:"9"}},[e("p",{staticClass:"text-center"},[e("em",[this._v("No data to show...")])])])}]}},453:function(t,e,r){var s=r(1)(r(456),r(457),!1,function(t){r(454)},null,null);t.exports=s.exports},454:function(t,e,r){var s=r(455);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);r(5)("1f5283a9",s,!0,{})},455:function(t,e,r){(t.exports=r(2)(!1)).push([t.i,"",""])},456:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{item:{required:!0,type:Object},loading:{type:Boolean,default:!1}},methods:{handleSubmit:function(t){var e=this;this.$validator.validateAll(t).then(function(t){t&&e.$emit("on-submit",e.item)})}},watch:{item:function(){this.$validator.reset(),this.errors.clear()}}}},457:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{attrs:{"data-vv-scope":"settings-form"},on:{submit:function(e){return e.preventDefault(),t.handleSubmit("settings-form")}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v("Name")]),t._v(" "),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.item.name,expression:"item.name"}],staticClass:"form-control",attrs:{name:"name",type:"text"},domProps:{value:t.item.name},on:{input:function(e){e.target.composing||t.$set(t.item,"name",e.target.value)}}}),t._v(" "),r("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("settings-form.name"),expression:"errors.has('settings-form.name')"}],staticClass:"form-text text-danger"},[t._v("\n      "+t._s(t.errors.first("settings-form.name"))+"\n    ")])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v("Price")]),t._v(" "),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.item.price,expression:"item.price"}],staticClass:"form-control",attrs:{name:"price",type:"number"},domProps:{value:t.item.price},on:{input:function(e){e.target.composing||t.$set(t.item,"price",e.target.value)}}}),t._v(" "),r("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("settings-form.price"),expression:"errors.has('settings-form.price')"}],staticClass:"form-text text-danger"},[t._v("\n      "+t._s(t.errors.first("settings-form.price"))+"\n    ")])]),t._v(" "),r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-sm btn-success",attrs:{disabled:t.loading}},[t.loading?r("span",[t._v("Saving...")]):t._e(),t._v(" "),t.loading?t._e():r("span",[t._v("Save")])])])])},staticRenderFns:[]}},458:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-12"},[r("card",{scopedSlots:t._u([{key:"card-header",fn:function(){return[r("h3",{staticClass:"card-title mb-0 float-left"},[t._v("\n          MANAGE FREEBIES\n        ")])]},proxy:!0},{key:"card-body",fn:function(){return[r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-12 mb-2 "},[r("div",{staticClass:"clearfix"},[r("div",{staticClass:"float-lg-left d-flex py-2"},[r("button",{staticClass:"btn btn-sm btn-primary",on:{click:t.onCreate}},[t._v("\n                  ADD FREEBIE\n                ")])]),t._v(" "),r("div",{staticClass:"float-lg-right d-flex py-2"},[r("search-form",{attrs:{keyword:t.keyword},on:{"on-change":t.onChange,"on-submit":t.handleSearch}})],1)])]),t._v(" "),r("div",{staticClass:"col-lg-12 mb-3 table-responsive"},[r("freebies-table",{attrs:{items:t.freebies,"is-loading":t.is_loading},on:{"on-edit":t.onEdit,"on-delete":t.onDelete}})],1),t._v(" "),r("div",{staticClass:"col-lg-12"},[r("Pagination",{attrs:{data:t.freebies},on:{"to-page":t.toPage,"first-page":t.firstPage,"prev-page":t.prevPage,"next-page":t.nextPage,"last-page":t.lastPage}})],1)])]},proxy:!0}])}),t._v(" "),r("modal",{scopedSlots:t._u([{key:"modal-title",fn:function(){return[r("h5",{staticClass:"text-white"},["CREATE"===t.form_type?r("span",[t._v("\n            New Freebie\n          ")]):t._e(),t._v(" "),"EDIT"===t.form_type&&t.freebie.name?r("span",[t._v("\n            Edit Freebie "+t._s(t.freebie.name)+"\n          ")]):t._e()])]},proxy:!0},{key:"modal-body",fn:function(){return[null!==t.response_errors?r("div",{staticClass:"form-group"},[r("validation-error-component",{attrs:{"error-object":t.response_errors}})],1):t._e(),t._v(" "),r("Form",{attrs:{item:t.freebie,loading:t.submitting},on:{"on-submit":t.onSubmit}})]},proxy:!0}])})],1)])},staticRenderFns:[]}}});