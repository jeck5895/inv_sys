webpackJsonp([13],{314:function(e,t,r){var n=r(1)(r(382),r(383),!1,function(e){r(380)},null,null);e.exports=n.exports},380:function(e,t,r){var n=r(381);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r(5)("c863941c",n,!0,{})},381:function(e,t,r){(e.exports=r(2)(!1)).push([e.i,"",""])},382:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(9)),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=c(r(152)),a=c(r(157)),i=(c(r(0)),r(8));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(s,o){try{var a=t[s](o),i=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}("next")})}}t.default={components:{Card:o.default,CheckoutForm:a.default},watch:{$route:function(e,t){this.resetForm=!0}},data:function(){return{resetForm:!1}},computed:s({},(0,i.mapGetters)({is_saving:"SALES/GET_SUBMIT_STATE",brands:"BRANDS/GET_BRANDS",categories:"CATEGORIES/GET_CATEGORIES",colors:"COLORS/GET_COLORS",suppliers:"SUPPLIERS/GET_SUPPLIERS",models:"UNITS/GET_UNITS",sales_item:"SALES/GET_SALES_ITEM"}),{freebies:function(){var e=[];return this.$store.getters["FREEBIES/GET_FREEBIES"].map(function(t){e.push({id:t.id,text:t.name})}),e}}),methods:s({},(0,i.mapActions)({fetchBrands:"BRANDS/fetchBrands",fetchCategories:"CATEGORIES/fetchCategories",fetchColors:"COLORS/fetchColors",fetchSuppliers:"SUPPLIERS/fetchSuppliers",fetchModels:"UNITS/fetchUnits",fetchFreebies:"FREEBIES/fetchFreebies",save:"SALES/STORE",update:"SALES/UPDATE",findBy:"SALES/FIND_BY"}),(0,i.mapMutations)("SALES",{clear:"CLEAR_SALES_ITEM"}),{handleCheckout:function(){var e=u(n.default.mark(function e(t){var r,o,a,i,c,u,f,l,p=this;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,t.action,o=t.items,a=t.payment_mode,i=t.total_amount,c=t.receipt_no,u=t.checkout_date,f=t.payment_terms,t.form,t.errors,l={items:o,payment_mode:a,receipt_no:c,checkout_date:u,total_amount:i},void 0!=f&&(l=s({},l,{payment_terms:f})),void 0!==r){e.next=8;break}return e.next=6,this.save(l).then(function(e){p.resetForm=!0}).catch(function(e){console.log(e.response)});case 6:e.next=11;break;case 8:return l=s({},l,{id:r}),e.next=11,this.update(l);case 11:console.log(t);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),handleQuantity:function(){this.submitted=!0,this.total_quantity=parseInt(this.quantity)},handleFormReset:function(e){e&&(this.resetForm=!1)}}),created:function(){var e=u(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchBrands("api/brands");case 2:return e.next=4,this.fetchCategories("api/categories");case 4:return e.next=6,this.fetchColors("api/colors");case 6:return e.next=8,this.fetchSuppliers("api/suppliers");case 8:return e.next=10,this.fetchModels("api/models");case 10:return e.next=12,this.fetchFreebies("api/freebies");case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),beforeRouteEnter:function(){var e=u(n.default.mark(function e(t,r,s){var o,a,i;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.name,a=t.params,i=a.receipt,"edit-sales"!==o){e.next=5;break}return e.next=5,store.dispatch("SALES/FIND_BY",{field:"receipt_no",value:i}).catch(function(e){404===e.status&&(toastr.error("No matching item found.","404"),s({name:"sales"}))});case 5:"create-sales"===o&&store.commit("SALES/CLEAR_SALES_ITEM"),s();case 7:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()}},383:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-12"},[r("card",{scopedSlots:e._u([{key:"card-header",fn:function(){return[r("h4",{staticClass:"mb-0"},["create-sales"===e.$route.name?r("span",[e._v("Checkout")]):r("span",[e._v("Edit "+e._s(e.sales_item.receipt_no))])])]},proxy:!0},{key:"card-body",fn:function(){return[r("checkout-form",{attrs:{"sales-item":e.sales_item,"is-loading":e.is_saving,"reset-form":e.resetForm,models:e.models,colors:e.colors,brands:e.brands,freebies:e.freebies},on:{"on-submit":e.handleCheckout,"on-reset":e.handleFormReset}})]},proxy:!0}])})],1)])},staticRenderFns:[]}}});